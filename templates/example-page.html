<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>דף דוגמה</title>
</head>
<body>
  <!--
    This is the main page file (example-page.html).
    It loads the main layout template (main-layout.html) into the placeholder div below.
    The layout contains the header, search, sidebar, and a <main id="page-content"> area for unique content.
    After loading the layout, this script loads the unique content for this page from page-content-example.html
    and inserts it into <main id="page-content">.
    This way, you keep the structure and design in one file (main-layout.html),
    and the unique content for each page in a separate file (page-content-example.html).
  -->
  <div id="main-layout-placeholder"></div>
  <script>
    // Load the main layout template for the page
    fetch('../templates/main-layout.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('main-layout-placeholder').innerHTML = html;
        // Load structured HTML content from a separate file into <main id="page-content">
        // This is the unique content for this page
        const pageContent = document.getElementById('main-layout-placeholder').querySelector('#page-content');
        if (pageContent) {
          fetch('page-content-example.html')
            .then(r => r.text())
            .then(contentHtml => {
              pageContent.innerHTML = contentHtml;
              // Only after all templates and content are loaded, load external scripts
              loadExternalScripts();
            });
        } else {
          // If pageContent not found, still try to load scripts (fallback)
          loadExternalScripts();
        }
      });

    // Loads external JS files for search and sidebar menu functionality
    function loadExternalScripts() {
      // Loads search box functionality
      const searchScript = document.createElement('script');
      searchScript.src = '../scripts/search.js';
      searchScript.onload = function() {
        if (typeof initSearchScripts === 'function') {
          initSearchScripts();
        }
      };
      document.body.appendChild(searchScript);

      // Loads sidebar menu functionality
      const sideMenuScript = document.createElement('script');
      sideMenuScript.src = '../scripts/side-menu.js';
      sideMenuScript.onload = function() {
        if (typeof initSideMenuScripts === 'function') {
          initSideMenuScripts();
        }
      };
      document.body.appendChild(sideMenuScript);
    }
  </script>
</body>
</html>
